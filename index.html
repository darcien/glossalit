<!DOCTYPE html>
<html lang="en">

<head>
    <title>Glossary</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="https://glossary.page/template" />
    <link rel="preconnect" href="https://glstatic.net" crossorigin>
    <link rel="apple-touch-icon" sizes="180x180"
        href="https://glstatic.net/glossary-page-template-favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32"
        href="https://glstatic.net/glossary-page-template-favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16"
        href="https://glstatic.net/glossary-page-template-favicons/favicon-16x16.png">
    <link rel="manifest" href="https://glstatic.net/glossary-page-template-favicons/site.webmanifest">
    <link rel="mask-icon" href="https://glstatic.net/glossary-page-template-favicons/safari-pinned-tab.svg"
        color="#5bbad5">
    <link rel="shortcut icon" href="https://glstatic.net/glossary-page-template-favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="https://glstatic.net/glossary-page-template-favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <script type="text/javascript">
        // Prevent FOUC
        document.documentElement.className = 'invisible';
    </script>
    
  <script type="module" crossorigin src="https://glstatic.net/glossary-page-template@1/glossary.min.js"></script>
  <link rel="stylesheet" href="https://glstatic.net/glossary-page-template@1/glossary.min.css">
</head>

<body>
    <div id="glossary-page-container" data-enable-help-for-making-changes="false">
        <header>
            <h1 id="glossary-page-title">
                Glossalit — the lit glossary
            </h1>
        </header>
        <main>
            <div id="glossary-page-about">
                <p>
                    Rather than a glossary for a specific domain, this is for me to list various term thats pretty lit (in my opinion).
                </p>
                <ul>
                    <li>
                        <a target="_blank" href="https://github.com/darcien/glossalit">
                            Git repository for this site
                        </a>
                    </li>
                    <li>
                        <a target="_blank" href="https://github.com/hilverd/glossary-page-template">
                            Original template created by hilverd
                        </a>
                    </li>
                </ul>
            </div>
            <article id="glossary-page-items">
                <dl>
                    <div>
                        <dt>
                            <dfn id="Aardvark">
                                <a href="#Aardvark">
                                    Aardvark
                                </a>
                            </dfn>
                        </dt>
                        <dd>
                            The aardvark (/ˈɑːrdvɑːrk/ ARD-vark; Orycteropus afer) is a medium-sized, burrowing, nocturnal mammal native to Africa.
                        </dd>
                        <dd>
                            The name &quot;aardvark&quot; is Afrikaans (Afrikaans pronunciation: [ˈɑːrtfark]), comes from earlier Afrikaans erdvark and means &quot;earth pig&quot; or &quot;ground pig&quot; (aarde: &quot;earth/ground&quot;, vark: &quot;pig&quot;), because of its burrowing habits.
                        </dd>
                        <dd>
                            Wiki: https://en.wikipedia.org/wiki/Aardvark
                        </dd>
                    </div>
                    <div>
                        <dt>
                            <dfn id="Catharsis">
                                <a href="#Catharsis">
                                    Catharsis
                                </a>
                            </dfn>
                        </dt>
                        <dd>
                            Catharsis (from Greek κάθαρσις, katharsis, meaning &quot;purification&quot; or &quot;cleansing&quot; or &quot;clarification&quot;) is the purification and purgation of emotions through dramatic art, or it may be any extreme emotional state that results in renewal and restoration.
                        </dd>
                        <dd>
                            Wiki: https://en.wikipedia.org/wiki/Catharsis
                        </dd>
                        <dd>
                            First encounter: Mousou Katharsis song from Megadimension Neptunia VII (https://vgmdb.net/album/52251)
                        </dd>
                    </div>
                    <div>
                        <dt>
                            <dfn id="Lacrimosa">
                                <a href="#Lacrimosa">
                                    Lacrimosa
                                </a>
                            </dfn>
                        </dt>
                        <dd>
                            Lacrimosa is Latin for &quot;weeping&quot;. It is also a name that derives from Our Lady of Sorrows, a title given to Mary, mother of Jesus.
                        </dd>
                        <dd>
                            Wiki: https://en.wikipedia.org/wiki/Lacrimosa_(disambiguation)
                        </dd>
                        <dd>
                            First encounter: Ys VIII: Lacrimosa of Dana (https://en.wikipedia.org/wiki/Ys_VIII:_Lacrimosa_of_Dana)
                        </dd>
                    </div>
                    <div>
                        <dt>
                            <dfn id="Primogenitor">
                                <a href="#Primogenitor">
                                    Primogenitor
                                </a>
                            </dfn>
                        </dt>
                        <dd>
                            Noun: an ancestor, especially the earliest ancestor of a people; a progenitor.
                        </dd>
                        <dd>
                            Wiki: https://en.wiktionary.org/wiki/primogenitor
                        </dd>
                        <dd class="related-terms">See also: <a href="#Primordial">Primordial</a></dd>
                    </div>
                    <div>
                        <dt>
                            <dfn id="Primordial">
                                <a href="#Primordial">
                                    Primordial
                                </a>
                            </dfn>
                        </dt>
                        <dd>
                            From the Latin prīmōrdiālis (“of the beginning”). Confer primordium and -al.
                        </dd>
                        <dd>
                            Adjective: first, earliest or original.
                        </dd>
                        <dd>
                            Noun: A first principle or element.
                        </dd>
                        <dd>
                            Wiki: https://en.wiktionary.org/wiki/primordial#English
                        </dd>
                        <dd class="related-terms">See also: <a href="#Primogenitor">Primogenitor</a></dd>
                    </div>
                    <div>
                        <dt>
                            <dfn id="果実">
                                <a href="#果実">
                                    果実
                                </a>
                            </dfn>
                        </dt>
                        <dt>
                            <dfn id="かじつ">
                                <a href="#かじつ">
                                    かじつ
                                </a>
                            </dfn>
                        </dt>
                        <dt>
                            <dfn id="kajitsu">
                                <a href="#kajitsu">
                                    kajitsu
                                </a>
                            </dfn>
                        </dt>
                        <dd>
                            Japanese term for &quot;fruit&quot;
                        </dd>
                        <dd>
                            Noun: In general, a product of plant growth useful to man or animals.
                        </dd>
                        <dd>
                            Noun: An end result, effect, or consequence; advantageous or disadvantageous result.
                        </dd>
                        <dd>
                            Wiki: https://en.wiktionary.org/wiki/fruit#Noun
                        </dd>
                    </div>
                    <div>
                        <dt>
                            <dfn id="歴史">
                                <a href="#歴史">
                                    歴史
                                </a>
                            </dfn>
                        </dt>
                        <dt>
                            <dfn id="れきし">
                                <a href="#れきし">
                                    れきし
                                </a>
                            </dfn>
                        </dt>
                        <dt>
                            <dfn id="rekishi">
                                <a href="#rekishi">
                                    rekishi
                                </a>
                            </dfn>
                        </dt>
                        <dd>
                            Japanese term for &quot;history&quot;
                        </dd>
                        <dd>
                            The aggregate of past events.
                        </dd>
                        <dd>
                            Wiki: https://en.wiktionary.org/wiki/%E6%AD%B4%E5%8F%B2#Japanese
                        </dd>
                    </div>
                </dl>
            </article>
        </main>
    </div>
</body>

</html>

<!--

#!/usr/bin/env node

/* START OF editor.js

This script starts a simple server listening on localhost.

* GET requests are served by local HTML/JS/CSS files.
* PATCH requests to / expect to receive an HTML fragment string in the body.
  This string is used to update the glossary file, replacing
    <div id="glossary-page-container"
      ...
    </div>.

This allows the editor to save any updates made in the UI.

*/

const http = require('http');
const fs = require('fs');
const path = require('path');
const HOST = process.env['HOST'] || 'localhost';
const PORT = process.env['PORT'] || 3003;
const FILE = process.env['FILE'] || './glossary.html';

const mimeTypes = {
    '.html': 'text/html',
    '.js': 'text/javascript',
    '.css': 'text/css'
};

const server = http.createServer(async (req, res) => {
    if (req.url === '/' && req.method === 'PATCH') {
        const buffers = [];
        for await (const chunk of req) {
            buffers.push(chunk);
        }
        const body = Buffer.concat(buffers).toString();
        replaceGlossaryElementInFile(body);
        res.writeHead(204).end();
    } else {
        serveLocalFile(req, res);
    }
});

server.listen(PORT, HOST, () => {
    console.log(`Server started at http://${HOST}:${PORT}`);
});

function serveLocalFile(req, res) {
    var filePath = '.' + req.url;
    if (filePath === './') filePath = FILE;

    const extname = String(path.extname(filePath)).toLowerCase();
    const contentType = mimeTypes[extname] || 'application/octet-stream';

    fs.readFile(filePath, 'utf-8', (err, fileContents) => {
        if (err) {
            serveErrorPage(err, res);
        } else {
            if (filePath === FILE)
                fileContents = fileContents.replace(
                    /<div id="glossary-page-container"/,
                    `<div id="glossary-page-container" data-editor-is-running="true"`
                );

            res.writeHead(200, { 'Content-Type': contentType });
            res.end(fileContents, 'utf-8');
        }
    });
}

function serveErrorPage(err, res) {
    if (err.code == 'ENOENT') {
        res.writeHead(404, { 'Content-Type': 'text/html' });
        res.end('<html><body>Page not found</body></html>');
    } else {
        res.writeHead(500, { 'Content-Type': 'text/html' });
        res.end('<html><body>Internal server error</body></html>');
    }
}

function replaceGlossaryElementInFile(newElementString) {
    fs.readFile(FILE, 'utf8', (err, fileContents) => {
        if (err) return console.log(err);

        const regex = /\n[ \t]*<div id="glossary-page-container".*<\/div>\n/s;

        if (!fileContents.replace(regex, 'replacing-worked').includes('replacing-worked')) {
            return console.log(`Unable to save changes using the regex ${regex}`);
        }

        const updatedFileContents = fileContents.replace(regex, "\n" + newElementString + "\n");

        fs.writeFile(FILE, updatedFileContents, 'utf8', (err) => {
            if (err) return console.log(err);
        });
    });
}

// -->